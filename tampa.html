<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City of Tampa</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>

<body>
    <!-- Page header -->
    <header class="header page-header">
        <div class="header-title-container">
            <img src="images/state_of_florida.jpg" alt="Florida State Map" class="header-map">
            <h2 class="subheading">Cities of Florida</h2>
            <h1 class="page-title">Tampa</h1>
            <img src="images/flag.png" alt="Florida State Flag" class="header-flag">
        </div>
    </header>
    <!-- Nav Bar -->
    <nav class="navbar">
        <ul>
            <li><a href="index.html">Home Page</a></li>
            <li><a href="tallahassee.html">Tallahassee</a></li>
            <li><a href="tampa.html" class="active">Tampa</a></li>
            <li><a href="seffner.html">Seffner</a></li>
            <li><a href="emailForm.html">Contact Us</a></li>
        </ul>
    </nav>

    <div class="content-wrapper">
        <!-- Tampa image and facts -->
        <section class="city-info">
           <img src="images/tampa.jpg" alt="Tampa" class="city-image">
           <div class="city-facts">
               <h3>City Facts</h3>
               <ul>
                   <li><strong>Population:</strong> 387,00</li>
                   <li><strong>Year Incorporated:</strong> 1855</li>
                   <li><strong>Region:</strong> West-Central</li>
                   <li><strong>Classification:</strong> Urban</li>
                   <li><strong>Average Income Level:</strong> Lower than state average</li>
               </ul>
           </div>
       </section>
       <!-- Aside Element -->
       <aside class="latest-posts">
           <h3>Latest Florida Man News</h3>
           <ul id="florida-man-posts"></ul>
       </aside>
   </div>


    <!--I really struggled to find content to fill the aside element, 
        so I learned how to pull stories from reddit.
        I think this is a little outside the scope of the assignment, 
        so I hope it isn't too far out of bounds-->
    <script> 
        document.addEventListener('DOMContentLoaded', () => {
            fetch('https://www.reddit.com/r/FloridaMan/top.json?limit=10') // fetches up to 10 posts, seems like ads interfere before that
                .then(response => response.json())
                .then(data => {
                    const posts = data.data.children;
                    const postsList = document.getElementById('florida-man-posts');
    
                    posts.forEach(post => {
                        const listItem = document.createElement('li');
                        const postTitle = post.data.title;
                        const postUrl = `https://www.reddit.com${post.data.permalink}`;
                        const thumbnailUrl = post.data.thumbnail;
    
                        // display posts with a valid thumbnail
                        if (thumbnailUrl && !thumbnailUrl.includes('default')) {
                            listItem.innerHTML = `
                                <a href="${postUrl}" target="_blank">
                                    <img src="${thumbnailUrl}" alt="${postTitle}" />
                                    <div>${postTitle}</div>
                                </a>
                            `;
                        } else {
                            // in case of no thumbnail
                            listItem.innerHTML = `
                                <a href="${postUrl}" target="_blank">
                                    <div>${postTitle}</div>
                                </a>
                            `;
                        }
                        
                        postsList.appendChild(listItem);
                    });
                })
                .catch(error => console.error('Error fetching posts:', error));
        });
    </script>
</body>
</html>