<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City of Seffner</title>
    <link rel="stylesheet" href="styles/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Page header -->
    <header class="header page-header">
        <div class="header-title-container">
            <img src="images/state_of_florida.jpg" alt="Florida State Map" class="header-map">
            <h2 class="subheading">Cities of Florida</h2>
            <h1 class="page-title">Seffner</h1>        
            <img src="images/flag.png" alt="Florida State Flag" class="header-flag">
        </div>
    </header>
    <!-- Nav Bar -->
    <nav class="navbar">
        <ul>
            <li><a href="index.html">Home Page</a></li>
            <li><a href="tallahassee.html">Tallahassee</a></li>
            <li><a href="tampa.html">Tampa</a></li>
            <li><a href="seffner.html" class="active">Seffner</a></li>
            <li><a href="emailForm.html">Contact Us</a></li>
        </ul>
    </nav>

    <div class="content-wrapper">
        <!-- Seffner image and facts -->
        <section class="city-info">
           <img src="images/seffner.jpg" alt="Seffner" class="city-image">
           <div class="city-facts">
               <h3>City Facts</h3>
               <ul>
                   <li><strong>Population:</strong> ~8300</li>
                   <li><strong>Year Incorporated:</strong> Unicorporated, but established in mid-1800s</li>
                   <li><strong>Region:</strong> West-Central</li>
                   <li><strong>Classification:</strong> Rural/Suburban</li>
                   <li><strong>Average Income Level:</strong> Higher than state average</li>
               </ul>
           </div>
       </section>
       <!-- Aside Element -->
       <aside class="latest-posts">
           <h3>Latest Florida Man News</h3>
           <ul id="florida-man-posts"></ul>
       </aside>
   </div>

        <!--I really struggled to find content to fill the aside element, 
        so I learned how to pull stories from reddit.
        I think this is a little outside the scope of the assignment, 
        so I hope it isn't too far out of bounds-->
    <script> 
        document.addEventListener('DOMContentLoaded', () => {
            fetch('https://www.reddit.com/r/FloridaMan/top.json?limit=10') // fetches up to 10 posts, seems like ads interfere before that
                .then(response => response.json())
                .then(data => {
                    const posts = data.data.children;
                    const postsList = document.getElementById('florida-man-posts');
                    //attempts to create a list with attached thumbnails
                    posts.forEach(post => {
                        const listItem = document.createElement('li');
                        const postTitle = post.data.title;
                        const postUrl = `https://www.reddit.com${post.data.permalink}`;
                        const thumbnailUrl = post.data.thumbnail;
    
                        // display posts with a valid thumbnail
                        //I learned that thumbnails titled "default" are frequently blank, so this checks
                        if (thumbnailUrl && !thumbnailUrl.includes('default')) {
                            listItem.innerHTML = `
                                <a href="${postUrl}" target="_blank">
                                    <img src="${thumbnailUrl}" alt="${postTitle}" />
                                    <div>${postTitle}</div>
                                </a>
                            `;
                        } else {
                            // in case of no thumbnail just disply text title
                            listItem.innerHTML = `
                                <a href="${postUrl}" target="_blank">
                                    <div>${postTitle}</div>
                                </a>
                            `;
                        }
                        //adds it to the news feed
                        postsList.appendChild(listItem);
                    });
                })
                .catch(error => console.error('Error fetching posts:', error));
        });
    </script>
</body>
<footer>
    <p>Image Credits:</p>
    <p>Home Page Pier Photo: Image by <a href="https://pixabay.com/users/kenny-126976/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=6089501">Kenny Holmes</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=6089501">Pixabay</a></p>
    <p>Florida State Flag: Image by <a href="https://pixabay.com/users/openclipart-vectors-30363/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=153392">OpenClipArt-Vectors</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=153392">Pixabay</a></p>
    <p>Florida Cartoon Map: Image by <a href="https://pixabay.com/users/mollyroselee-9214707/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=8629184">Mollyroselee</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=8629184">Pixabay</a></p>
    <p>Tallahassee Section Photo: Image by <a href="https://pixabay.com/users/ernie114-7088342/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=4814068">Ernie A. Stephens</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=4814068">Pixabay</a></p>
    <p>Tampa Section Photo: Image by <a href="https://pixabay.com/users/emessess-11134640/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=4847040">EmEssEss</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=4847040">Pixabay</a></p>
    <p>Seffner Section Photo: Image by <a href="https://pixabay.com/users/paulbr75-2938186/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2419789">Paul Brennan</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2419789">Pixabay</a></p>
</footer>
</html>